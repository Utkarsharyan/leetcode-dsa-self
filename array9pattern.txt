==============================
PATTERN: Prefix Sum
PROBLEM: Range Sum Query (l to r)
==============================

PROBLEM STATEMENT:
Given an integer array, answer multiple queries where each query asks
for the sum of elements between indices l and r (inclusive).

Example:
arr = [2, 4, 6, 8, 10]
Query: l = 1, r = 3
Output: 18  // 4 + 6 + 8

--------------------------------
BRUTE FORCE APPROACH (Naive)
--------------------------------
Idea:
For every query, iterate from index l to r and add all elements.

Steps:
1. For a query (l, r):
2. Initialize sum = 0
3. Loop from i = l to r
4. Add arr[i] to sum
5. Return sum

Time Complexity:
O(n) per query

Space Complexity:
O(1)

Why this is inefficient:
- Repeated queries cause repeated summation
- Same elements are added again and again

--------------------------------
OPTIMIZED APPROACH (Key Insight)
--------------------------------
Instead of recalculating sums repeatedly,
we can PRECOMPUTE cumulative sums.

This leads to the PREFIX SUM technique.

--------------------------------
PATTERN EXPLANATION:
Prefix Sum
--------------------------------
Prefix Sum Array:
prefix[i] = sum of elements from index 0 to i

Example:
arr    = [2, 4, 6, 8, 10]
prefix = [2, 6, 12, 20, 30]

Now:
Sum(l to r) =
- if l == 0 → prefix[r]
- else → prefix[r] - prefix[l - 1]

--------------------------------
DRY RUN EXAMPLE:
--------------------------------
arr = [2, 4, 6, 8, 10]

prefix[0] = 2
prefix[1] = 2 + 4  = 6
prefix[2] = 6 + 6  = 12
prefix[3] = 12 + 8 = 20
prefix[4] = 20 + 10 = 30

Query (1, 3):
prefix[3] - prefix[0]
= 20 - 2
= 18

--------------------------------
OPTIMIZED CODE (Java)
--------------------------------

static int[] buildPrefixSum(int[] arr) {
    int n = arr.length;
    int[] prefix = new int[n];

    prefix[0] = arr[0];
    for (int i = 1; i < n; i++) {
        prefix[i] = prefix[i - 1] + arr[i];
    }
    return prefix;
}

static int rangeSum(int[] prefix, int l, int r) {
    if (l == 0) {
        return prefix[r];
    }
    return prefix[r] - prefix[l - 1];
}

--------------------------------
TIME & SPACE COMPLEXITY
--------------------------------
Prefix Construction:
Time: O(n)
Space: O(n)

Each Query:
Time: O(1)
Space: O(1)

--------------------------------
WHEN TO USE THIS PATTERN
--------------------------------
Use Prefix Sum when:
- Multiple range queries are asked
- Subarray sum problems
- You need fast l to r calculations

--------------------------------
COMMON INTERVIEW MISTAKES
--------------------------------
- Forgetting the l == 0 case
- Modifying original array unnecessarily
- Using brute force for multiple queries

--------------------------------
LEETCODE QUESTIONS (Practice)
--------------------------------
1. Range Sum Query – Immutable
   LeetCode #303
   https://leetcode.com/problems/range-sum-query-immutable/

2. Subarray Sum Equals K
   LeetCode #560
   https://leetcode.com/problems/subarray-sum-equals-k/

--------------------------------
KEY TAKEAWAY
--------------------------------
Prefix Sum converts repeated O(n) work into O(1) queries.
Always think: "Can I precompute something once?"
==============================
